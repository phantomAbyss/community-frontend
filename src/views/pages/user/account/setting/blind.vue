<template>
  <el-dialog
    title="提示"
    :visible.sync="value"
    width="30%"
    :before-close="handleClose"
    class="blind-dialog"
  >
    <!-- <span>这是三方绑定的修改框</span> -->
    <!-- 可以绑定的账号类型 -->
    <el-table :data="accounts" style="width: 100%" border>
      <el-table-column label="账号类型" width="180">
        <template slot-scope="scope">
          <span v-html="scope.row.icon">{{ scope.row.icon }}</span>
          <span style="margin-left: 10px">{{ scope.row.account }}</span>
        </template>
      </el-table-column>
      <el-table-column prop="username" label="用户名" width="100" v-if="isBlind"></el-table-column>
      <el-table-column label="操作">
        <template slot-scope="scope">
          <el-button
            type="primary"
            plain
            round
            size="mini"
            @click="handleEdit(scope.$index, scope.row)"
            v-if="!scope.row.blinded"
            >绑定</el-button
          >
          <el-button
            size="mini"
            type="danger"
            plain
            round
            @click="handleDelete(scope.$index, scope.row)"
            v-if="scope.row.blinded"
            >解绑</el-button
          >
        </template>
      </el-table-column>
    </el-table>
    <!-- 验证身份 -->
    <span slot="footer" class="dialog-footer">
      <el-button @click="offDialog">取 消</el-button>
      <el-button type="primary">确 定</el-button>
    </span>
  </el-dialog>
</template>

<script>
import accountApi from "@/common/service/user/account";

export default {
  name: "blind",
  data() {
    return {
      /* 是否有已经绑定的账号类型 */
      isBlind: false,
      /* 账号类型的数据 */
      accounts: [
        {
          icon:
            '<svg t="1613189697408" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11740" width="22" height="22"><path d="M693.12 347.264c11.776 0 23.36 0.896 35.008 2.176-31.36-146.048-187.456-254.528-365.696-254.528C163.2 94.912 0 230.656 0 403.136c0 99.52 54.272 181.248 145.024 244.736L108.8 756.864l126.72-63.488c45.312 8.896 81.664 18.112 126.912 18.112 11.392 0 22.656-0.512 33.792-1.344-7.04-24.256-11.2-49.6-11.2-76.032 0.064-158.336 136-286.848 308.096-286.848z m-194.816-98.24c27.392 0 45.376 17.984 45.376 45.248 0 27.136-17.984 45.312-45.376 45.312-27.072 0-54.336-18.176-54.336-45.312 0-27.328 27.2-45.248 54.336-45.248z m-253.632 90.56c-27.2 0-54.592-18.176-54.592-45.312 0-27.264 27.392-45.248 54.592-45.248s45.248 17.92 45.248 45.248c0 27.136-18.048 45.312-45.248 45.312zM1024 629.76c0-144.896-145.024-262.976-307.904-262.976-172.48 0-308.224 118.144-308.224 262.976 0 145.28 135.808 262.976 308.224 262.976 36.096 0 72.512-9.024 108.736-18.112l99.392 54.528-27.264-90.624C969.728 783.872 1024 711.488 1024 629.76z m-407.872-45.376c-17.984 0-36.224-17.92-36.224-36.224 0-18.048 18.24-36.224 36.224-36.224 27.52 0 45.376 18.176 45.376 36.224 0 18.304-17.856 36.224-45.376 36.224z m199.36 0c-17.856 0-36.032-17.92-36.032-36.224 0-18.048 18.112-36.224 36.032-36.224 27.264 0 45.376 18.176 45.376 36.224 0 18.304-18.112 36.224-45.376 36.224z" p-id="11741" fill="#7171fc"></path></svg>',
          account: "微信",
          blinded: false,
        },
        {
          icon:
            '<svg t="1613267579012" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1310" width="22" height="22"><path d="M438.28275201 911.36c0-40.96-66.56-66.56-158.72-66.56s-168.96 30.72-168.96 71.68c0 40.96 76.8 71.68 168.96 71.68 92.16 5.12 158.72-35.84 158.72-76.8m337.92 0c0-40.96-66.56-66.56-158.72-66.56s-168.96 30.72-168.96 71.68c0 40.96 76.8 71.68 168.96 71.68 92.16 5.12 158.72-35.84 158.72-76.8" fill="#945624" p-id="1311"></path><path d="M448.52275201 901.12c0-40.96 66.56-66.56 158.72-66.56s168.96 30.72 168.96 71.68c0 40.96-76.8 71.68-168.96 71.68-97.28 5.12-158.72-35.84-158.72-76.8m-5.12 0c0-40.96-66.56-66.56-158.72-66.56-92.16 5.12-168.96 35.84-168.96 76.8s76.8 71.68 168.96 71.68c97.28 0 158.72-40.96 158.72-81.92" fill="#ECB42B" p-id="1312"></path><path d="M90.12275201 486.4s-133.12 163.84-51.2 291.84c0 0 20.48 20.48 66.56-71.68l35.84-71.68-51.2-148.48z" fill="#10100F" p-id="1313"></path><path d="M796.93875201 485.7344s133.12 163.84 51.2 291.84c0 0-20.48 20.48-66.56-71.68L745.73875201 639.3344l51.2-153.6z" fill="#10100F" p-id="1314"></path><path d="M85.00275201 573.44c0-225.28 184.32-465.92 363.52-465.92 179.2 0 358.4 240.64 358.4 471.04s-179.2 353.28-358.4 353.28-363.52-133.12-363.52-358.4" fill="#10100F" p-id="1315"></path><path d="M172.04275201 568.32c10.24-81.92 102.4-215.04 276.48-215.04s256 128 266.24 225.28c25.6 199.68-92.16 343.04-266.24 343.04s-296.96-133.12-276.48-353.28" fill="#FDFDFD" p-id="1316"></path><path d="M85.00275201 496.64s0-61.44 40.96-112.64c15.36-20.48 645.12 5.12 645.12 5.12s40.96 81.92 35.84 112.64c0 0-122.88 148.48-363.52 143.36-240.64-10.24-358.4-148.48-358.4-148.48" fill="#AC1F24" p-id="1317"></path><path d="M202.76275201 727.04s66.56 40.96 107.52 30.72c20.48-5.12 30.72-5.12 30.72-20.48 0-15.36 0-133.12 10.24-143.36 10.24-10.24-81.92-46.08-102.4-46.08-15.36 0-30.72 15.36-30.72 20.48-5.12 5.12-25.6 102.4-15.36 158.72" fill="#AC1F24" p-id="1318"></path><path d="M765.86035201 382.3104c-5.12 66.56-148.48 148.48-343.04 148.48S125.86035201 402.7904 125.86035201 377.1904C120.74035201 110.9504 294.82035201 3.4304 443.30035201 3.4304c174.08 0 343.04 112.64 322.56 378.88" fill="#10100F" p-id="1319"></path><path d="M300.04275201 245.76c0-51.2 30.72-87.04 66.56-87.04 35.84 0 66.56 40.96 66.56 87.04 0 51.2-30.72 87.04-66.56 87.04-35.84 0-66.56-35.84-66.56-87.04" fill="#FEFEFE" p-id="1320"></path><path d="M356.36275201 250.88c0-25.6 10.24-46.08 25.6-46.08s25.6 20.48 25.6 46.08-10.24 46.08-25.6 46.08-25.6-20.48-25.6-46.08" fill="#050101" p-id="1321"></path><path d="M381.96275201 240.64c0-10.24 5.12-15.36 10.24-15.36s10.24 5.12 10.24 15.36c0 10.24-5.12 15.36-10.24 15.36-5.12-5.12-10.24-10.24-10.24-15.36m87.04 5.12c0-51.2 30.72-87.04 66.56-87.04 35.84 0 66.56 40.96 66.56 87.04 0 51.2-30.72 87.04-66.56 87.04-40.96 0-66.56-35.84-66.56-87.04" fill="#FEFEFE" p-id="1322"></path><path d="M238.60275201 394.24c-5.12 5.12-5.12 5.12 0 10.24 5.12 10.24 20.48 25.6 51.2 40.96 35.84 15.36 92.16 56.32 122.88 61.44 30.72 5.12 51.2 5.12 71.68 0 20.48-5.12 87.04-46.08 97.28-46.08 10.24 0 76.8-46.08 76.8-56.32 0-10.24-35.84-56.32-174.08-56.32H417.80275201c0 5.12-138.24 20.48-179.2 46.08" fill="#ECB42B" p-id="1323"></path><path d="M361.48275201 261.12c0-5.12 5.12-10.24 10.24-10.24 0 0 5.12 5.12 5.12 10.24l-5.12 5.12c-5.12 0-10.24-5.12-10.24-5.12" fill="#FEFEFE" p-id="1324"></path><path d="M494.60275201 271.36c5.12 0 10.24-5.12 5.12-10.24V256c0-20.48 10.24-30.72 15.36-30.72 10.24 0 15.36 15.36 15.36 30.72v5.12c0 5.12 5.12 10.24 5.12 10.24 5.12 0 5.12-5.12 5.12-5.12V256c0-25.6-15.36-46.08-30.72-46.08-10.24 0-25.6 20.48-25.6 46.08v10.24c0 5.12 5.12 5.12 10.24 5.12z" fill="#050101" p-id="1325"></path><path d="M279.56275201 404.48S341.00275201 460.8 448.52275201 460.8s163.84-46.08 163.84-46.08-46.08 35.84-76.8 46.08c-30.72 10.24-40.96 35.84-81.92 35.84s-61.44-25.6-76.8-25.6c-15.36-5.12-87.04-51.2-97.28-66.56" fill="#945624" p-id="1326"></path></svg>',
          account: "QQ",
          blinded: false,
        },
        {
          icon:
            '<svg t="1613190534141" class="icon" viewBox="0 0 1280 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12311" width="21" height="21"><path d="M1025.818112 6.0928c-42.9056-9.728-100.4544-7.7824-172.6464 5.8368-0.9728 0-1.9456 0.512-2.9696 1.4336l-1.4336 2.9184-1.4336 1.4848a47.616 47.616 0 0 0-26.368 18.2272 49.2544 49.2544 0 0 0-10.24 29.8496c0 14.592 4.864 26.7264 14.6432 36.4544 9.728 9.728 21.504 14.5408 35.1232 14.592h4.4032c0.9728 0 3.1744-0.512 6.6048-1.4336a76.8 76.8 0 0 1 10.9568-2.2016c3.84-0.512 7.9872-1.4848 12.4416-2.9184 4.4032-1.4848 8.3456-2.9696 11.6736-4.4032 3.3792-1.4848 9.984-2.2016 19.7632-2.2016 9.8304 0 21.76 0.7168 35.84 2.2016 14.1312 1.4336 29.696 5.12 46.848 10.9056 17.1008 5.8368 34.1504 13.1072 51.2 21.8624 17.0496 8.7552 34.1504 20.9408 51.2 36.4544 17.152 15.5136 32 33.4848 44.6464 53.9136 25.3952 57.344 30.208 112.6912 14.6432 166.144a6.5024 6.5024 0 0 1-0.7168 2.9184 46.7968 46.7968 0 0 0-2.2016 7.2704 298.6496 298.6496 0 0 1-2.9696 10.9056c-1.024 3.4304-1.9968 7.8336-2.9696 13.1072a78.7456 78.7456 0 0 0-1.4336 13.824c0 8.8064 2.4576 16.0768 7.3216 21.9136a39.424 39.424 0 0 0 18.2784 12.3904c7.3216 2.4576 15.872 3.6352 25.6 3.6352 27.3408 0 43.4176-16.4864 48.2816-49.5616 11.7248-37.888 18.2784-74.0864 19.7632-108.544 1.4848-34.5088-0.9728-64.8704-7.3216-91.136a292.0448 292.0448 0 0 0-28.5184-73.5232 246.9376 246.9376 0 0 0-43.8784-58.3168 356.6592 356.6592 0 0 0-55.6032-43.7248c-20.48-13.1584-40.2432-23.552-59.2896-31.3344a401.2544 401.2544 0 0 0-59.2896-18.944h0.0512z m24.8832 410.9312a30.72 30.72 0 0 0 16.0768-4.352 36.5056 36.5056 0 0 0 17.5616-24.7808c1.024-0.9728 1.4848-2.4064 1.4848-4.4032 11.6736-110.7456-27.3408-173.9264-117.0432-189.44a207.5136 207.5136 0 0 0-73.216-1.4848 29.952 29.952 0 0 0-17.5104 5.12 45.9776 45.9776 0 0 0-12.4928 13.1072 30.208 30.208 0 0 0-5.12 16.7424c0 9.728 3.4816 17.92 10.2912 24.7296a34.1504 34.1504 0 0 0 24.8832 10.24c76.0832-17.5104 117.0432 6.7584 122.88 72.8576 1.9456 16.5376 0.9728 32.0512-2.9696 46.6432 0 9.728 3.4304 17.9712 10.24 24.7808a34.1504 34.1504 0 0 0 24.8832 10.24z m-519.3728 304.64a32.4608 32.4608 0 0 1-21.1968 6.5536c-7.3216-0.4608-12.4416-3.584-15.36-9.472l-2.9696-5.8368a13.1072 13.1072 0 0 1-1.4336-5.8368v-5.7856c0-2.9184 0.512-5.376 1.4336-7.2704l2.9696-5.8368a9.3696 9.3696 0 0 1 4.4032-4.4032l4.4032-5.8368c7.7824-5.8368 15.36-8.2432 22.6304-7.2704a18.432 18.432 0 0 1 15.36 11.6736 17.9712 17.9712 0 0 1 3.6352 13.1072 35.84 35.84 0 0 1-4.352 13.824c-2.4576 4.4032-5.632 8.5504-9.5232 12.4416v-0.0512z m-124.3648 104.96a67.3792 67.3792 0 0 1-31.4368-2.2528 160.8704 160.8704 0 0 1-13.1584-5.0688 30.1056 30.1056 0 0 1-10.9568-8.0384 148.5824 148.5824 0 0 1-8.0384-10.24 44.288 44.288 0 0 1-8.0384-25.4464c0-10.752 2.9184-21.1456 8.7552-31.3344 5.888-10.24 13.9264-18.944 24.1664-26.2656 10.24-7.3216 21.7088-11.4688 34.3552-12.3904 8.8064-1.024 17.3056-0.7168 25.6 0.7168 8.3456 1.4848 15.36 3.8912 21.248 7.2704 5.8368 3.3792 10.9568 7.2704 15.36 11.6736a38.4 38.4 0 0 1 9.472 15.3088c1.9456 5.7856 2.9184 12.1344 2.9696 18.944 0 10.6496-3.1744 20.8896-9.5232 30.5664-6.2976 9.728-14.848 17.92-25.6 24.7808a75.264 75.264 0 0 1-35.1232 11.6224v0.1024z m52.736-275.5072a243.3024 243.3024 0 0 0-76.1344 19.6608c-22.4256 10.24-39.936 21.8624-52.6336 34.9696a222.5152 222.5152 0 0 0-32.256 42.24 160.512 160.512 0 0 0-18.2784 44.4928c-3.3792 14.5408-5.632 27.904-6.6048 40.0384-1.024 12.1344-1.4848 21.6064-1.4336 28.416l1.4336 11.6224v5.8368c0 2.9184 1.024 8.7552 2.9696 17.5104 1.9456 8.704 4.608 16.7424 8.0384 24.064 3.3792 7.2704 9.0112 15.36 16.7936 24.064 7.8336 8.704 17.1008 16.0256 27.8016 21.8624 64.4096 31.0784 124.416 40.5504 179.968 28.416 55.6032-12.1856 100.4544-40.0896 134.6048-83.8144 13.6704-16.5376 22.6816-36.9152 27.0336-61.2352a171.264 171.264 0 0 0-2.9184-73.5744 186.9824 186.9824 0 0 0-32.9216-67.7888c-15.616-20.4288-38.7584-36.1984-69.4784-47.36-30.72-11.1616-66.048-14.336-106.0864-9.472h0.0512z m42.3424 403.712c-105.3184 4.864-194.7648-15.5648-268.3904-61.2352-73.6256-45.6704-110.4384-103.4752-110.4384-173.4144 0-69.0176 36.5568-128.512 109.7216-178.5344 73.1648-50.0224 162.8672-77.4656 269.1584-82.3808 106.3424-4.864 196.096 12.6464 269.2096 52.48 73.1648 39.8336 109.7216 94.2592 109.7216 163.2256 0 69.9392-37.3248 132.864-111.9232 188.7232-74.6496 55.8592-163.6352 86.2208-267.008 91.0848z m446.208-453.2736c-14.6432-2.9184-24.1152-7.2704-28.5184-13.056-4.352-5.8368-5.12-11.1616-2.2016-16.0768l4.4032-7.2704A17.4592 17.4592 0 0 0 924.902912 460.8c1.024-1.9456 2.9184-6.0928 5.8368-12.3904s5.12-12.5952 6.656-18.944c1.4336-6.2976 2.6624-14.08 3.584-23.296 0.9728-9.216 0.7168-17.9712-0.7168-26.2656a111.4112 111.4112 0 0 0-8.8064-26.9312 90.0608 90.0608 0 0 0-18.3296-26.2656c-13.6704-13.6192-31.4368-22.3744-53.4016-26.2656a199.8848 199.8848 0 0 0-65.8432-0.7168c-21.9136 3.3792-42.6496 7.7312-62.1568 13.1072-19.456 5.3248-35.584 10.4448-48.2304 15.2576l-19.0464 8.8064c-9.728 2.9184-17.8176 4.864-24.1152 5.7856a27.8016 27.8016 0 0 1-14.6944-0.7168 38.9632 38.9632 0 0 1-8.0384-4.4032c-1.9456-1.4336-2.6624-4.864-2.2016-10.24a359.424 359.424 0 0 1 1.4336-13.824c0.512-3.8912 1.7408-9.9328 3.6864-18.2272 1.9456-8.2432 3.3792-14.848 4.4032-19.6608 0-11.6736-0.768-22.5792-2.2016-32.768-1.4848-10.24-4.608-21.6576-9.5232-34.2528a73.5232 73.5232 0 0 0-21.1968-30.6176 109.2096 109.2096 0 0 0-35.1232-18.944c-14.1312-4.8128-32.4096-6.2976-54.8864-4.352-22.4256 1.9456-47.7696 7.7824-76.032 17.5104a470.528 470.528 0 0 0-103.936 51.712c-35.072 22.784-65.536 46.592-91.392 71.3728-25.856 24.7808-49.5104 48.8448-70.9632 72.192-21.504 23.296-38.0928 42.24-49.7664 56.832l-16.128 23.296c-32.1536 41.7792-56.064 83.5584-71.68 125.3376-15.5648 41.7792-22.8864 73.3696-21.9136 94.72v30.6176c5.8368 46.592 20.224 88.4224 43.1616 125.3376 22.8864 36.9152 50.176 66.816 81.92 89.6 31.744 22.8352 69.0176 42.2912 111.9232 58.368 42.9056 16.0256 84.1216 27.648 123.648 34.9184 39.5264 7.3216 81.2032 12.3904 125.0816 15.36 72.192 5.7856 147.0464 0.2048 224.5632-16.7936a680.2432 680.2432 0 0 0 216.5248-88.1664c66.816-41.7792 113.8688-91.8528 141.2096-150.1184 16.5376-34.048 25.088-66.048 25.6-96.256 0.512-30.1056-4.608-54.6304-15.36-73.5744a187.2896 187.2896 0 0 0-41.728-50.2272 207.5136 207.5136 0 0 0-48.2816-32.1024 165.888 165.888 0 0 0-40.192-13.1072v0.1024z" fill="#7171fc" p-id="12312"></path></svg>',
          account: "微博",
          username: 'phantom',
          blinded: true,
        },
        {
          icon:
            '<svg t="1613267664297" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1557" width="22" height="22"><path d="M616.96 703.104h-48.128s-6.144-3.84-6.144-14.592v-101.12l-54.4 0.64v112.512s5.248 29.696 44.672 29.696h91.264V594.432H616.96v108.672zM453.76 594.432h-50.944s-47.104-1.792-63.488 51.456c-5.76 35.584 5.12 49.152 7.04 53.76 1.92 4.48 17.152 30.72 55.296 30.72h79.488V525.824l-27.136-0.64v69.248z m0 108.672h-40.192s-24.832-0.64-32.384-29.184c-3.84-12.8 0.64-24.96 2.56-30.592 1.792-5.76 10.112-21.76 27.264-21.76h42.752v81.536z" fill="#0068FF" p-id="1558"></path><path d="M511.744 1.664C229.504 1.664 0.64 230.528 0.64 512.768 0.64 795.136 229.504 1024 511.744 1024c282.368 0 511.232-228.864 511.232-511.232 0-282.24-228.864-511.104-511.232-511.104z m31.232 271.232c4.096-37.12 48.512-94.208 84.224-86.016 35.456 8.064 67.968 55.168 61.312 95.744-6.4 40.576-38.656 94.208-88.832 87.68-50.176-6.528-61.568-51.968-56.704-97.408z m-105.088-102.272c37.504 0 67.968 43.264 67.968 96.64s-30.336 96.64-67.968 96.64c-37.504 0-67.968-43.264-67.968-96.64 0-53.504 30.464-96.64 67.968-96.64zM226.048 399.488s8.064-79.488 63.104-84.48c43.776-3.84 75.904 44.032 79.232 71.424 2.048 17.792 11.264 99.072-56.704 113.664-67.84 14.592-93.184-63.872-85.632-100.608z m517.504 342.528c-37.248 87.68-173.184 42.112-173.184 42.112s-50.176-16.128-108.288-3.2c-58.24 13.056-108.288 8.064-108.288 8.064s-68.096 1.664-87.424-84.352c-19.328-86.144 67.968-133.248 74.496-141.184 6.4-8.192 51.712-38.912 80.768-87.68 29.184-48.64 116.48-87.68 177.92 8.064 45.312 64.896 123.008 125.056 123.008 125.056s58.24 45.568 20.992 133.12z m-11.264-199.68c-74.496 1.664-77.568-50.304-77.568-87.552 0-39.04 8.064-94.208 67.968-94.208 59.904 0 76.032 58.496 76.032 77.952-0.128 19.456 7.936 102.144-66.432 103.808z" fill="#0068FF" p-id="1559"></path></svg>',
          account: "百度",
          username: 'phantom-baidu',
          blinded: true,
        },
      ],
    };
  },
  props: {
    handleEdit(index, row) {
      console.log(index, row);
    },
    handleDelete(index, row) {
      console.log(index, row);
    },
    /* 收集编辑对话框是否显示 */
    value: {
      default: true,
    },
  },
  created () {
    this.getBindList();
  },
  methods: {
    /* 获取可以绑定的三方账号的类型 */
    getBindList() {
      accountApi.getBindList().then(res => {
        if (res.code === 200) {
          //获取成功
          this.accounts = res.items || [];
          if (this.accounts.length) {
            this.accounts = this.accounts.map((item, index) => {
              item.index = index;
              if (!this.isBlind && item.username !== undefined) {
                this.isBlind = true;
              }
              item.username = item.username.length < 1 ? '未绑定' : item.username;
              return item;
            })
          }
        }
      })
    },
    /* 关闭收集编辑框 */
    offDialog() {
      setTimeout(() => {
        this.$emit("input", false);
      }, 200);
    },
    handleClose(done) {
      this.$confirm("确认关闭？")
        .then((_) => {
          this.offDialog();
          done();
        })
        .catch((_) => {});
    },
  },
};
</script>

<style lang="less" scoped>
/* 三方账号绑定样式开始 */
.blind-dialog {
  /* 账号类型的样式开始 */
  /deep/ .el-table {
    .el-table__body {
      font-size: 16px;
    }
    td {
      padding: 5px 0px;
    }
    .cell {
      text-align: center;
      svg {
        position: relative;
        top: 6px;
      }
    }
  }
  /* 账号类型的样式结束 */
}
/* 三方账号绑定样式结束 */
</style>